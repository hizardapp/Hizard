// Generated by CoffeeScript 1.6.2
(function() {
  var $;

  $ = jQuery;

  $.fn.extend({
    kanban: function(options) {
      var load, settings, _createColumn;

      settings = {
        opacity: 0.8,
        containment: 'document',
        cursor: 'move',
        distance: 5,
        zIndex: 7777,
        connectWith: '.kanban-list-cards',
        change: function(event, ui) {
          return ui.placeholder.addClass('kanban-card-placeholder');
        },
        others: {
          containerClass: 'kanban-list-cards',
          columnClass: 'kanban-list',
          columnHeaderClass: 'kanban-list-header',
          cardClass: 'kanban-card',
          data: null
        }
      };
      settings = $.extend(true, settings, options);
      _createColumn = function(title) {
        var column;

        column = "<div class='" + settings.others.columnClass + "'>";
        column += "<div class='" + settings.others.columnHeaderClass + "'>";
        column += "<h2>" + title + "</h2>";
        column += "<div class='" + settings.others.containerClass + "'>";
        column += "</div>";
        column += "</div>";
        column += "</div>";
        return $(column);
      };
      load = function($board) {
        var $column, $container, boardContent, card, column, number, position, _ref, _ref1, _results;

        boardContent = '';
        _ref = settings.others.data;
        _results = [];
        for (number in _ref) {
          column = _ref[number];
          $column = _createColumn(column.name);
          _ref1 = column.cards;
          for (position in _ref1) {
            card = _ref1[position];
            $container = $column.find('.' + settings.others.containerClass);
            $container.append($(card.content));
          }
          _results.push(console.log($column));
        }
        return _results;
      };
      return this.each(function() {
        var others;

        others = settings.others;
        if (others.data != null) {
          $(this).html(others.data);
        }
        delete settings.others;
        return $('.' + others.containerClass).sortable(settings);
      });
    }
  });

}).call(this);
