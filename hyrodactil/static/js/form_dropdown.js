// Generated by CoffeeScript 1.6.2
(function() {
  var FormDropdown, _ref;

  if ((_ref = window.Hizard) == null) {
    window.Hizard = {};
  }

  FormDropdown = (function() {
    function FormDropdown(hasErrors, objectId, createSelector, updateSelector) {
      var $td;

      this.createSelector = createSelector;
      this.updateSelector = updateSelector;
      this.hasErrors = hasErrors !== '' ? true : false;
      this.objectId = objectId !== '' ? parseInt(objectId, 10) : false;
      this._setupEvents();
      if (this.hasErrors) {
        if (this.objectId) {
          $td = $(this.updateSelector + "[data-id=" + this.objectId + "]");
          this._fillEditDropdown($td);
          Foundation.libs.dropdown.toggle($td);
        } else {
          Foundation.libs.dropdown.toggle($(this.createSelector));
        }
      }
    }

    FormDropdown.prototype._setupEvents = function() {
      var _fillCreateDropdown, _fillEditDropdown;

      _fillEditDropdown = this._fillEditDropdown;
      _fillCreateDropdown = this._fillCreateDropdown;
      $(this.updateSelector).click(function() {
        return _fillEditDropdown($(this));
      });
      return $(this.createSelector).click(function() {
        return _fillCreateDropdown($(this));
      });
    };

    FormDropdown.prototype._fillCreateDropdown = function($elem) {
      var createDropdown, createURL;

      createURL = $elem.data("url");
      createDropdown = $("#" + $elem.data("dropdown"));
      createDropdown.find("form").attr("action", createURL);
      console.log(createDropdown);
      return createDropdown.find("input[type=text]").focus();
    };

    FormDropdown.prototype._fillEditDropdown = function($elem) {
      var dept, editDropdown, updateURL;

      dept = $elem.find("span").text();
      updateURL = $elem.data("url");
      editDropdown = $("#" + $elem.data("dropdown"));
      editDropdown.find("form").attr("action", updateURL);
      editDropdown.find("input[type=text]").val(dept);
      return editDropdown.find("input[type=text]").focus();
    };

    return FormDropdown;

  })();

  window.Hizard.FormDropdown = FormDropdown;

}).call(this);
