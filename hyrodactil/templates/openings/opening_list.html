{% extends "base_app.html" %}

{% load i18n %}

{% block content %}
  <h2 class="page-header">{% trans "Openings" %}</h2>

  <a href="{% url 'openings:create_opening' %}" class="button-positive">
    {% trans "Create an opening" %}
  </a>

  {% if opening_list %}
    <table class="opening-list">
      <thead>
        <tr class="row">
          <th class="large-6 columns">{% trans "Title" %}</th>
          <th class="large-1 columns">{% trans "Created" %}</th>
          <th class="large-1 columns">{% trans "Closed" %}</th>
          <th class="large-2 columns">{% trans "Applicants" %}</th>
          <th class="large-2 columns">{% trans "Actions" %}</th>
        </tr>
      </thead>

      <tbody>
        {% for opening in opening_list %}
          <tr class="row">
            <td class="large-6 columns">
              <strong><a href="{% url 'openings:detail_opening' opening.id %}" class="opening-title">{{ opening.title }}</a></strong>
            </td>

            <td class="large-1 columns">
              {{ opening.created|date:"d/m/Y" }}
            </td>

            <td class="large-1 columns">
              {{ opening.closing_date|date:"d/m/Y" }}
            </td>

            <td class="large-2 columns">
              {% for stage, count in opening.applicants_stats %}
                <a href="{% url "applications:list_applications" opening.id %}" data-tooltip class="has-tip" title="{{ stage }}">
                  {{ count }}
                </a>
                {% if not forloop.last %}/{% endif %}
              {% endfor %}
            </td>

            <td class="large-2 columns">
              <a href="{% url 'openings:update_opening' opening.id %}">{% trans "Edit" %}</a>
              |
              <a href="{% url 'openings:delete_opening' opening.id %}">{% trans "Delete" %}</a>
              |
              <a href="{% url 'openings:close_opening' opening.id %}">{% trans "Close" %}</a>
            </td>

          </tr>
        {% endfor %}
      </tbody>

    </table>
  {% endif %}

{% endblock content %}
