{% extends "app_page.html" %}

{% load i18n %}
{% load staticfiles %}

{% block title %}
  {% trans 'Home' %}
{% endblock title %}

{% block page-content %}

  <h2>{% trans 'Home' %}</h2>

  <div class="dashboard-graph">
    <h3>{% trans 'Latest candidates' %}</h3>
    <table>
      <thead>
      <tr>
        <th>{% trans 'Name' %}</th>
        <th>{% trans 'Applied for' %}</th>
        <th>{% trans 'Applied the' %}</th>
      </tr>
      </thead>
      <tbody>

      {% for application in last_applications %}
        <tr>
          <td>
            <a href="{% url "applications:application_detail" application.id %}">{{ application.applicant.get_full_name }}</a>
          </td>
          <td>
            <a href="{% url "openings:detail_opening" application.opening.id %}">{{ application.opening.title }}</a>
          </td>
          <td>{{ application.created|date:"Y/m/d H:i" }}</td>
        </tr>
      {% endfor %}

      {% if not last_applications %}
        <tr>
          <td colspan="42">{% trans 'No candidates' %}</td>
        </tr>
      {% endif %}

      </tbody>
    </table>
  </div>

  <div class="dashboard-graph">
    <h3>{% trans 'Openings' %}</h3>

    <table>
      <thead>
      <tr>
        <th>{% trans 'Title' %}</th>
        {% for interview_stage in interview_stages %}
          <th>{{ interview_stage.name }}</th>
        {% endfor %}
      </tr>
      </thead>
      <tbody>

      {% for opening in opening_list %}
        <tr>
          <td>
            <a href="{% url "openings:detail_opening" opening.id %}">{{ opening.title }}</a>
          </td>
          {% for stage_count in opening.stage_counts %}
            <td>{{ stage_count }}</td>
          {% endfor  %}
        </tr>
      {% endfor %}

      {% if not opening_list %}
        <tr>
          <td colspan="42">{% trans 'No published openings' %}</td>
        </tr>
      {% endif %}

      </tbody>
    </table>
  </div>

  {% if false %}
  <!-- At the bottom of your page but inside of the body tag -->
  <ol class="joyride-list" data-joyride>
    <li data-text="Next">
      <h4>Welcome to Hizard</h4>
      <p>Here's a quick tour of it to get you started</p>
    </li>
    <li data-class="dashboard-graph" data-text="Next">
      <h4>Dashboard</h4>
      <p>From there you can see the latest candidates and have a quick overview of all your openings.</p>
    </li>
    <li data-id="openings-menu" data-text="Next">
      <h4>Openings</h4>
      <p>If you want to create, edit, publish openings, it's there.</p>
    </li>
    <li data-id="applicants-menu" data-text="Next">
      <h4>Applicants</h4>
      <p>This page will show you the applicants for all your openings.</p>
    </li>
    <li data-id="career-site-menu" data-text="Next">
      <h4>Career Site</h4>
      <p>Clicking here will open your company career site on a new tab.</p>
    </li>
    <li data-id="settings-menu" data-text="Next">
      <h4>Settings</h4>
      <p>Go there to change anything related to the company : add question, interview stages, invite colleagues and modify the company information that will appear on your career site</p>
    </li>
    <li data-id="user-menu" data-text="Next">
      <h4>User settings</h4>
      <p>This is where you can change your name, avatar and password</p>
    </li>
    <li data-button="Next">
      <h4>And voila !</h4>
      <p>Start exploring !</p>
    </li>
  </ol>
   {% endif %}
{% endblock page-content %}


{% block extra-js %}
  <script src="{% static "js/foundation/foundation.joyride.js" %}"></script>
  <script type="text/javascript">
    $(document).foundation('joyride', 'start');
  </script>
{% endblock extra-js %}
