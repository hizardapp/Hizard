{% extends "app_page.html" %}

{% load i18n %}
{% load staticfiles %}


{% block title %}
  {% trans 'Manage users' %}
{% endblock title %}


{% block page-content %}
  <h2>{% trans "Manage users" %}</h2>

  <div>
    <ul class="user-list">
      {% for user in users %}
        <li class="container">
          <span class="left">
            <img height="40" width="40" src="{{ user.get_avatar_url }}" alt="Avatar" align="left" />
            <span class="right">
              {{ user.name }}
              <br>
              {% if user.is_company_admin %}
                {% trans 'Administrator' %}
              {% endif %}
            </span>
          </span>

          {% if request.user.is_company_admin and not user.is_company_admin and user != request.user %}
            <span class="right">
              <a href="{% url 'accounts:delete' user.id %}"><i class="icon-trash"></i> {% trans 'Delete this user' %}</a>
              <br>
              <a href="{% url 'accounts:promote' user.id %}"><i class="icon-thumbs-up"></i> {% trans 'Promote to administrator' %}</a>
            </span>
          {% endif %}

        </li>
      {% endfor %}
    </ul>
  </div>

  <div>
    <ul class="user-list">
      {% for user in invited_users %}
        <li class="container">
          <img height="40" width="40" src="{{ user.get_avatar_url }}" alt="Avatar" class="left" />
          {{ user.email }}
          <br>
          {% trans 'Invited the ' %}{{ user.created|date:"SHORT_DATE_FORMAT" }}
        </li>
      {% endfor %}
    </ul>
  </div>

  <div>
    <form action="." method="POST">
      {% csrf_token %}

      {% for field in form %}

        <div class="row">
          <div class="large-12 columns {% if field.errors %} error {% endif %}">

            {{ field.label_tag }}
            {{ field }}

            {% if field.errors %}
              <small class="error">
                {% for error in field.errors %}
                  {{ error }}
                {% endfor %}
              </small>
            {% endif %}
          </div>
        </div>

      {% endfor %}

      <div class="row">
        <div class="large-12 columns">
          <div class="right">
            <input type="submit" value="{% trans 'Invite user' %}" class="button-positive" />
          </div>
        </div>
      </div>

    </form>
  </div>

{% endblock page-content %}